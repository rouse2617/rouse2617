<mxfile host="app.diagrams.net" modified="2023-08-11T16:37:04.781Z" agent="Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36" etag="uUOXFyLEYX12Wed6qgXD" version="21.6.8" type="github">
  <diagram name="第 1 页" id="vbbRplhO5rjdBHYVbgLp">
    <mxGraphModel dx="1436" dy="742" grid="1" gridSize="7" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="12000" pageHeight="12000" math="0" shadow="1">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="mleYgtzhbft6N6-4qK0f-1" value="rgw 中各个服务启动流程" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="60" width="190" height="20" as="geometry" />
        </mxCell>
        <mxCell id="mleYgtzhbft6N6-4qK0f-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="mleYgtzhbft6N6-4qK0f-2" target="mleYgtzhbft6N6-4qK0f-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mleYgtzhbft6N6-4qK0f-2" value="&lt;div style=&quot;color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;RGWStoreManager::&lt;span style=&quot;color: #dcdcaa;&quot;&gt;get_storage&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="76" y="90" width="230" height="50" as="geometry" />
        </mxCell>
        <mxCell id="mleYgtzhbft6N6-4qK0f-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="mleYgtzhbft6N6-4qK0f-3" target="mleYgtzhbft6N6-4qK0f-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mleYgtzhbft6N6-4qK0f-3" value="&lt;br&gt;&lt;div style=&quot;color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #4ec9b0;&quot;&gt;RGWStoreManager&lt;/span&gt;&lt;span style=&quot;color: #cccccc;&quot;&gt;::&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(220, 220, 170);&quot;&gt;init_storage_provider&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="81" y="170" width="219" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mleYgtzhbft6N6-4qK0f-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="mleYgtzhbft6N6-4qK0f-5" target="mleYgtzhbft6N6-4qK0f-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mleYgtzhbft6N6-4qK0f-5" value="&#xa;&lt;div style=&quot;color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #4ec9b0;&quot;&gt;RGWRados&lt;/span&gt;&lt;span style=&quot;color: #cccccc;&quot;&gt;::&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;initialize&lt;/span&gt;&lt;span style=&quot;color: #cccccc;&quot;&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&#xa;&#xa;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="82.25" y="261" width="217.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mleYgtzhbft6N6-4qK0f-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="mleYgtzhbft6N6-4qK0f-7" target="mleYgtzhbft6N6-4qK0f-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mleYgtzhbft6N6-4qK0f-7" value="&lt;div style=&quot;color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;RGWRados::&lt;span style=&quot;color: #dcdcaa;&quot;&gt;init_svc&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="82.5" y="330" width="217.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mleYgtzhbft6N6-4qK0f-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="mleYgtzhbft6N6-4qK0f-9" target="mleYgtzhbft6N6-4qK0f-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mleYgtzhbft6N6-4qK0f-9" value="&#xa;&lt;div style=&quot;color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #cccccc;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;svc&lt;/span&gt;&lt;span style=&quot;color: #cccccc;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;init&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&#xa;&#xa;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="82.5" y="390" width="217.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mleYgtzhbft6N6-4qK0f-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="mleYgtzhbft6N6-4qK0f-11" target="mleYgtzhbft6N6-4qK0f-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mleYgtzhbft6N6-4qK0f-11" value="&#xa;&lt;div style=&quot;color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #4ec9b0;&quot;&gt;RGWServices&lt;/span&gt;&lt;span style=&quot;color: #cccccc;&quot;&gt;::&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;do_init&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&#xa;&#xa;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="82.5" y="460" width="217.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mleYgtzhbft6N6-4qK0f-13" value="&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp; finisher = _svc.finisher.get();&lt;/span&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp; notify = _svc.notify.get();&lt;/div&gt;&lt;div&gt;&amp;nbsp; rados = _svc.rados.get();&lt;/div&gt;&lt;div&gt;&amp;nbsp; zone = _svc.zone.get();&lt;/div&gt;&lt;div&gt;&amp;nbsp; zone_utils = _svc.zone_utils.get();&lt;/div&gt;&lt;div&gt;&amp;nbsp; quota = _svc.quota.get();&lt;/div&gt;&lt;div&gt;&amp;nbsp; sync_modules = _svc.sync_modules.get();&lt;/div&gt;&lt;div&gt;&amp;nbsp; sysobj = _svc.sysobj.get();&lt;/div&gt;&lt;div&gt;&amp;nbsp; cache = _svc.sysobj_cache.get();&lt;/div&gt;&lt;div&gt;&amp;nbsp; core = _svc.sysobj_core.get();&lt;/div&gt;&amp;nbsp; http_manager = _svc.http_manager.get();&amp;nbsp;" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="370" y="387.5" width="300" height="185" as="geometry" />
        </mxCell>
        <mxCell id="mleYgtzhbft6N6-4qK0f-15" value="这里会初始化很多种 服务" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="370" y="365" width="140" height="22.5" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="msYl1upBDC3CMJgV2yu4-1" target="msYl1upBDC3CMJgV2yu4-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-1" value="桶的元数据 生成&lt;br&gt;meta&lt;br&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="798" y="80" width="196" height="32" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="msYl1upBDC3CMJgV2yu4-6" target="msYl1upBDC3CMJgV2yu4-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-6" value="&lt;div&gt;&amp;nbsp;RGWCreateBucket::execute()&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="798" y="192" width="196" height="32" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="msYl1upBDC3CMJgV2yu4-9" target="msYl1upBDC3CMJgV2yu4-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-18" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="msYl1upBDC3CMJgV2yu4-9" target="msYl1upBDC3CMJgV2yu4-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-9" value="&lt;div&gt;RGWRados::get_bucket_info&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="798" y="304" width="196" height="32" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="msYl1upBDC3CMJgV2yu4-11" target="msYl1upBDC3CMJgV2yu4-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-11" value="&lt;div&gt;_get_bucket_info&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1074" y="304" width="196" height="32" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-13" value="get_bucket_meta_oid(entry_point.bucket, oid);&lt;br&gt;构建 meta对象的前缀&lt;br&gt;&lt;div style=&quot;color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;.bucket.meta.[bucketname]&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1365" y="290" width="288" height="60" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="msYl1upBDC3CMJgV2yu4-17" target="msYl1upBDC3CMJgV2yu4-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-17" value="&lt;div&gt;&amp;nbsp;store-&amp;gt;create_bucket&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="798" y="416" width="196" height="32" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="msYl1upBDC3CMJgV2yu4-21" target="msYl1upBDC3CMJgV2yu4-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-21" value="&lt;div&gt;create_bucket_id(&amp;amp;bucket.marker);&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1074" y="416" width="196" height="32" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-26" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="msYl1upBDC3CMJgV2yu4-23" target="msYl1upBDC3CMJgV2yu4-25">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1350" y="490" as="sourcePoint" />
            <mxPoint x="912.5" y="597" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-23" value="&amp;nbsp;put_linked_bucket_info &amp;nbsp;&lt;div style=&quot;color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1350" y="416" width="196" height="32" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-28" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="msYl1upBDC3CMJgV2yu4-25" target="msYl1upBDC3CMJgV2yu4-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-25" value="RGWRados::put_bucket_entrypoint_info&lt;div style=&quot;color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="791" y="505" width="243" height="32" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-30" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="msYl1upBDC3CMJgV2yu4-27" target="msYl1upBDC3CMJgV2yu4-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-27" value="rgw_bucket_store_info&lt;div style=&quot;color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1114" y="505" width="243" height="32" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-32" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="msYl1upBDC3CMJgV2yu4-29" target="msYl1upBDC3CMJgV2yu4-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-29" value="store-&amp;gt;meta_mgr-&amp;gt;put_entry&lt;div style=&quot;color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1437" y="505" width="243" height="32" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" target="msYl1upBDC3CMJgV2yu4-33">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1869" y="537.0000000000002" as="sourcePoint" />
            <mxPoint x="1169" y="660" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1869" y="563" />
              <mxPoint x="1750" y="563" />
              <mxPoint x="1750" y="700" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-31" value="构造一个 完整的　ｏｉｄ&amp;nbsp;&amp;nbsp;&lt;br&gt;handler-&amp;gt;get_pool_and_oid(store, key, pool, oid);&lt;div style=&quot;color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1750" y="500" width="270" height="42" as="geometry" />
        </mxCell>
        <mxCell id="msYl1upBDC3CMJgV2yu4-33" value="rgw_put_system_obj　&lt;br&gt;通用流程&lt;br&gt;&lt;div style=&quot;color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1615" y="707" width="270" height="42" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
